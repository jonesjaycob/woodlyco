// This is your Prisma schema file

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum QuoteStatus {
  DRAFT
  SENT
  ACCEPTED
  DECLINED
  EXPIRED
}

model Customer {
  id        String   @id @default(cuid())
  name      String
  email     String?
  phone     String?
  address   String?
  city      String?
  state     String?
  zip       String?
  notes     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  quotes    Quote[]
}

model Quote {
  id          String      @id @default(cuid())
  quoteNumber String      @unique
  customerId  String
  customer    Customer    @relation(fields: [customerId], references: [id])
  status      QuoteStatus @default(DRAFT)
  title       String?
  description String?
  subtotal    Decimal     @default(0) @db.Decimal(10, 2)
  tax         Decimal     @default(0) @db.Decimal(10, 2)
  total       Decimal     @default(0) @db.Decimal(10, 2)
  validUntil  DateTime?
  notes       String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  lineItems   LineItem[]
}

model LineItem {
  id          String  @id @default(cuid())
  quoteId     String
  quote       Quote   @relation(fields: [quoteId], references: [id], onDelete: Cascade)
  description String
  quantity    Int     @default(1)
  unitPrice   Decimal @db.Decimal(10, 2)
  total       Decimal @db.Decimal(10, 2)
  sortOrder   Int     @default(0)
}

model ContactSubmission {
  id          String   @id @default(cuid())
  name        String
  email       String
  phone       String?
  projectType String   @default("standard")
  message     String
  createdAt   DateTime @default(now())
}

model Inquiry {
  id          String   @id @default(cuid())
  productId   String
  productName String
  name        String
  email       String
  phone       String?
  message     String?
  createdAt   DateTime @default(now())
}
